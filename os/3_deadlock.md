# Deadlock 교착상태

## 의미 
- 두개 이상의 프로세스 혹은 스레드가 서로가 가진 리소스를 기다리는 상태

## 발생 조건
### 1. Mutual exclusion
- 리소스를 공유해서 사용할 수 없음
- 특정 시점에 특정 객체만 리소스를 선점할 수 있음

### 2. Hold and wait
- 프로세스나 쓰레드가 이미 하나 이상의 리소스를 취득한(hold) 상태에서 다른 프로세스가 사용하고 있는 리소스를 추가로 기다림(wait)

### 3. No preemption
- 리소스 반환(releas)은 오직 그 리소스를 취득한 프로세스만 할 수 있음

### 4. Circular wait
- 프로세스들이 순환(circular) 형태로 서로의 리소스를 기다림

## OS가 데드락을 해결하는 방법
### 1. 데드락 방지
- 발생 조건 4가지 중 하나가 충족되지 않게 시스템을 디자인
1. Mutual exclusion : 리소스를 공유 가능하게 함
2. Hold and wait : 사용할 리소스들을 모두 획득한 뒤에 시작 or 모든 리소스를 전혀 갖지 않은 상태에서만 리소스 요청
3. No preemption : 추가적인 리소스를 기다려야 한다면 이미 획득한 리소스를 다른 프로세스가 선점 가능하도록 함
4. Circular wait : 모든 리소스에 순서 체계를 부여해서 오름차순으로 리소스를 요청

### 2. 데드락 회피 (Deadlock avoidance)
- 실행 환경에서 추가적인 정보를 활용해서 데드락이 발생할 것 같은 상황을 회피하는 것

### 3. 데드락 감지와 복구
- 데드락을 허용하고 데드락이 발생하면 복구하는 전략
- 방법 1 : 데드락 관련 프로세스 강제 종료
- 방법 2 : 리소스의 일시적인 선점을 허용(다른 프로세스가 획득한 리소스를 뺏어갈 수 있도록 허용)

### 4. 데드락 무시
- 아무것도 안함
- 개발자가 어플리케이션 계층에서 알아서 하게 하는 것